const imagePreviewer=function(e){const t=this,i=t.closest("form"),r=i.querySelector(".form-control-filename"),n=i.querySelector(".form-control-thumbnail"),o=e.target.files;if(o&&o[0]){const e=o[0];r.textContent=r.dataset.text;const t=new FileReader;t.addEventListener("load",function(e){n.style.backgroundImage=`url("${e.target.result}")`}),t.readAsDataURL(e)}},formControlFileRef=document.querySelectorAll(".form-control-file");formControlFileRef.forEach(e=>{e.addEventListener("change",imagePreviewer)}),$(document).ready(()=>{setTimeout(function(){$("#flash").fadeOut("slow")},3e3)}),$(".delete-review").on("click",e=>{e.preventDefault();const t=$(e.currentTarget).data(),i=$("#form-delete-review");i.find('[name="review_id"]').val(t.review_id),i.find('[name="perfume_id"]').val(t.perfume_id)}),$(".edit-review").on("click",e=>{e.preventDefault();const t=$(e.currentTarget).data(),i=$("#form-edit-review");i.find('[name="review_id"]').val(t.review_id),i.find('[name="perfume_id"]').val(t.perfume_id)});const checkSelected=function(){if("/type/new"===this.value)return window.location=this.value;this.value&&this.closest("form").submit()},selectElement=document.querySelector("#filter_query");selectElement&&selectElement.addEventListener("change",checkSelected),$(document).on("click","#editFormButton",function(){const e=$(this).parents("div").siblings("div.review-content").children("div").children("div.content-review").html();CKEDITOR.instances.edit_review.setData(e)}),$(".is-invalid").closest(".modal").modal("show"),$(document).ready(()=>{$("img").each(function(){this.onerror=(()=>{$(this).hasClass("user-picture")?$(this).attr("src","../static/images/default.png"):$(this).hasClass("perfume-picture")&&$(this).attr("src","../static/images/generic.jpg")})})});